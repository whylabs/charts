# whylogs

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.0.14](https://img.shields.io/badge/AppVersion-1.0.14-informational?style=flat-square)

A Helm chart for WhyLab's WhyLogs

See [WhyLogs Documentation](https://docs.whylabs.ai/docs/integrations-whylogs-container/) for more information

> :warning: Review the [documentation on using WhyLab's Helm charts](../../README.md#how-to-use-whylabs-helm-repository)

## Prerequisites

### Secrets

The following configured secrets must exist in the cluster prior to deploying
the WhyLogs Helm chart.

Create a [WhyLabs API Key](https://docs.whylabs.ai/docs/whylabs-capabilities/#access-token-management)
which must be stored in a `whylabs-api-key` Kubernetes secret, described below.

```shell
whylabs_api_key=""
whylogs_password=""
namespace="default"

kubectl create secret generic whylabs-api-key \
  --namespace "${namespace}" \
  --from-literal=api-key="${whylabs_api_key}"

kubectl create secret generic whylogs-container-password \
  --namespace "${namespace}" \
  --from-literal=passwordy="${whylogs_password}"
```

## Deployment

### Diff
View the difference between the current state and desired state.

```shell
# Requires the helm-diff plugin to be installed:
# helm plugin install https://github.com/databus23/helm-diff
helm diff upgrade \
  --allow-unreleased \
  whylogs "whylogs-0.1.0.tgz"
```

### Install/Update
```shell
helm upgrade --install \
  --create-namespace \
  --namespace "${namespace}" \
  whylogs "whylogs-0.1.0.tgz"
```

### Uninstall
```shell
helm uninstall \
  --namespace "${namespace}" \
  whylogs "whylogs-0.1.0.tgz"
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity | object | `{}` |  |
| autoscaling.enabled | bool | `false` |  |
| autoscaling.maxReplicas | int | `100` |  |
| autoscaling.minReplicas | int | `1` |  |
| autoscaling.targetCPUUtilizationPercentage | int | `80` |  |
| env.DEFAULT_WHYLABS_DATASET_CADENCE | string | `"HOURLY"` |  |
| env.DEFAULT_WHYLABS_UPLOAD_CADENCE | string | `"M"` |  |
| env.DEFAULT_WHYLABS_UPLOAD_INTERVAL | string | `"15"` |  |
| env.DISABLE_CONTAINER_PASSWORD | string | `"False"` |  |
| env.FAIL_STARTUP_WITHOUT_CONFIG | string | `"False"` |  |
| env.WHYLABS_ORG_ID | string | `"org-0"` |  |
| envFromSecrets[0].secretRef.name | string | `"whylabs-api-key"` |  |
| envFromSecrets[1].secretRef.name | string | `"whylogs-container-password"` |  |
| fullnameOverride | string | `""` |  |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"registry.gitlab.com/whylabs/whylogs-container"` |  |
| image.tag | string | `"1.0.14"` |  |
| imagePullSecrets[0].name | string | `"gitlab-container-registry-auth"` |  |
| ingress.annotations | object | `{}` |  |
| ingress.className | string | `""` |  |
| ingress.enabled | bool | `false` |  |
| ingress.hosts[0].host | string | `"chart-example.local"` |  |
| ingress.hosts[0].paths[0].path | string | `"/"` |  |
| ingress.hosts[0].paths[0].pathType | string | `"ImplementationSpecific"` |  |
| ingress.tls | list | `[]` |  |
| livenessProbe.failureThreshold | int | `3` |  |
| livenessProbe.httpGet.path | string | `"/health"` |  |
| livenessProbe.httpGet.port | int | `8000` |  |
| livenessProbe.initialDelaySeconds | int | `30` |  |
| livenessProbe.periodSeconds | int | `30` |  |
| nameOverride | string | `""` |  |
| nodeSelector | object | `{}` |  |
| podAnnotations | object | `{}` |  |
| podLabels | object | `{}` |  |
| podSecurityContext | object | `{}` |  |
| readinessProbe.failureThreshold | int | `10` |  |
| readinessProbe.httpGet.path | string | `"/health"` |  |
| readinessProbe.httpGet.port | int | `8000` |  |
| readinessProbe.initialDelaySeconds | int | `30` |  |
| readinessProbe.periodSeconds | int | `30` |  |
| replicaCount | int | `1` | Number of replicas for the service. |
| resources | object | `{}` |  |
| securityContext.readOnlyRootFilesystem | bool | `true` |  |
| securityContext.runAsUser | int | `1000` |  |
| service.annotations | object | `{}` |  |
| service.port | int | `80` |  |
| service.targetPort | int | `8000` |  |
| service.type | string | `"ClusterIP"` |  |
| serviceAccount.annotations | object | `{}` |  |
| serviceAccount.automount | bool | `true` |  |
| serviceAccount.create | bool | `true` |  |
| serviceAccount.name | string | `""` |  |
| tolerations | list | `[]` |  |
| volumeMounts[0].mountPath | string | `"/tmp"` |  |
| volumeMounts[0].name | string | `"temp-dir"` |  |
| volumes[0].emptyDir | object | `{}` |  |
| volumes[0].name | string | `"temp-dir"` |  |

----------------------------------------------

Autogenerated from chart metadata using [helm-docs](https://github.com/norwoodj/helm-docs/).