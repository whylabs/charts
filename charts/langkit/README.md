# LangKit Helm Chart

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square)
![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)
![AppVersion: 1.16.0](https://img.shields.io/badge/AppVersion-1.16.0-informational?style=flat-square)

> :warning: Review the [documentation on using WhyLab's Helm charts](../../README.md#how-to-use-whylabs-helm-repository)

## Prerequisites

### Credentials

The following Kubernetes `Secrets` must exist in the cluster prior to installing
this Helm chart: `whylabs-api-secret` and `langkit-api-secret`. The following
commands can be used to create the `Secrets` within the cluster.

```shell
kubectl create secret generic whylabs-api-secret \
  --namespace=langkit \
  --from-literal=WHYLABS_API_KEY=<whylabs-api-key>

kubectl create secret generic langkit-api-secret \
  --namespace=langkit \
  --from-literal=CONTAINER_PASSWORD=<langkit-api-key>
```

## Usage

### Template
Display the full YAML manifests as they will be applied.

```shell
# This will use the "langkit" namespace
helm template --namespace langkit langkit .
```

### Diff
View the difference between the current state and desired state.

```shell
# Requires the helm-diff plugin to be installed:
# helm plugin install https://github.com/databus23/helm-diff
helm diff upgrade \
  --allow-unreleased \
  `# do not create namespace if it already exists` \
  --set namespace.create=false \
  --namespace langkit \
  langkit langkit-0.2.0.tgz
```

### Install/Update
```shell
helm upgrade --install \
  `# do not create namespace if it already exists` \
  --set namespace.create=false \
  --namespace langkit \
  langkit langkit-0.2.0.tgz
```

### Uninstall
```shell
helm uninstall \
  --namespace langkit \
  langkit .
```

## Development

### Generate Values Table

The following command will output the [Values table](#values) below. Copy and
paste the table into this `README.md` file whenever this chart changes.

```shell
helm-docs --dry-run
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| fullnameOverride | string | `""` |  |
| image.containerPort | int | `8000` |  |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"whylabs/whylogs"` |  |
| image.tag | string | `"py-llm-latest"` |  |
| imagePullSecrets | list | `[]` |  |
| ingress.annotations | object | `{}` |  |
| ingress.className | string | `""` |  |
| ingress.enabled | bool | `false` |  |
| ingress.hosts[0].host | string | `"chart-example.local"` |  |
| ingress.hosts[0].paths[0].path | string | `"/"` |  |
| ingress.hosts[0].paths[0].pathType | string | `"ImplementationSpecific"` |  |
| ingress.tls | list | `[]` |  |
| livenessProbe.initialDelaySeconds | int | `15` |  |
| livenessProbe.periodSeconds | int | `10` |  |
| livenessProbe.tcpSocket.port | int | `8000` |  |
| nameOverride | string | `""` |  |
| namespace.create | bool | `true` |  |
| namespace.name | string | `nil` |  |
| nodeSelector | object | `{}` |  |
| podAnnotations | object | `{}` |  |
| podLabels | object | `{}` |  |
| podSecurityContext | object | `{}` |  |
| readinessProbe.initialDelaySeconds | int | `15` |  |
| readinessProbe.periodSeconds | int | `10` |  |
| readinessProbe.tcpSocket.port | int | `8000` |  |
| replicaCount | int | `3` |  |
| resources.limits.cpu | string | `"8"` |  |
| resources.limits.memory | string | `"16Gi"` |  |
| resources.requests.cpu | string | `"4"` |  |
| resources.requests.memory | string | `"8Gi"` |  |
| secrets.langkitApiSecret.name | string | `"langkit-api-secret"` |  |
| secrets.whylabsApiKey.name | string | `"whylabs-api-key"` |  |
| securityContext | object | `{}` |  |
| service.port | int | `80` |  |
| service.type | string | `"ClusterIP"` |  |
| serviceAccount.annotations | object | `{}` |  |
| serviceAccount.automount | bool | `true` |  |
| serviceAccount.create | bool | `false` |  |
| serviceAccount.name | string | `""` |  |
| tolerations[0].effect | string | `"NoSchedule"` |  |
| tolerations[0].key | string | `"kubernetes.azure.com/scalesetpriority"` |  |
| tolerations[0].operator | string | `"Equal"` |  |
| tolerations[0].value | string | `"spot"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.12.0](https://github.com/norwoodj/helm-docs/releases/v1.12.0)
