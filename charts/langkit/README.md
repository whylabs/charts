# langkit

![Version: 0.1.0](https://img.shields.io/badge/Version-0.1.0-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.16.0](https://img.shields.io/badge/AppVersion-1.16.0-informational?style=flat-square)

## Prerequisites

### Credentials

The following Kubernetes `Secrets` must exist in the cluster prior to installing this Helm chart: `whylabs-api-secret` and `langkit-api-secret`. The following commands can be used to create the `Secrets` within the cluster.

```shell
kubectl create secret generic whylabs-api-secret \
  --namespace=langkit \
  --from-literal=WHYLABS_API_KEY=<whylabs-api-key>

kubectl create secret generic langkit-api-secret \
  --namespace=langkit \
  --from-literal=LANGKIT_API_KEY=<langkit-api-key>
```

## Usage

### Template
```shell
# This will use the "langkit" namespace
helm template --namespace langkit langkit .
```

### Diff
```shell
# Requires the helm-diff plugin to be installed:
# helm plugin install https://github.com/databus23/helm-diff
helm diff \
  `# do not create namespace if it already exists` \
  --set namespace.create=false \
  --namespace langkit2 \
  --allow-unreleased \
  upgrade \
  langkit langkit-0.1.0.tgz
```

### Install/Update
```shell
helm upgrade \
  `# do not create namespace if it already exists` \
  --set namespace.create=false \
  --namespace langkit \
  --install \
  langkit langkit-0.1.0.tgz
```

### Uninstall
```shell
helm uninstall \
  --namespace langkit \
  langkit .
```

## Development

### Generate Values Table

The following command will output the [Values table](#values) below. Copy and paste the table into this `README.md` file whenever this chart changes.

```shell
helm-docs --dry-run
```

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].podAffinityTerm.labelSelector.matchExpressions[0].key | string | `"app.kubernetes.io/name"` |  |
| affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].podAffinityTerm.labelSelector.matchExpressions[0].operator | string | `"In"` |  |
| affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].podAffinityTerm.labelSelector.matchExpressions[0].values[0] | string | `"langkit"` |  |
| affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].podAffinityTerm.topologyKey | string | `"kubernetes.io/hostname"` |  |
| affinity.podAntiAffinity.preferredDuringSchedulingIgnoredDuringExecution[0].weight | int | `100` |  |
| fullnameOverride | string | `""` |  |
| image.pullPolicy | string | `"IfNotPresent"` |  |
| image.repository | string | `"whylabs/whylogs"` |  |
| image.tag | string | `"py-llm-latest"` |  |
| imagePullSecrets | list | `[]` |  |
| nameOverride | string | `""` |  |
| namespace.create | bool | `true` |  |
| namespace.name | string | `nil` |  |
| nodeSelector | object | `{}` |  |
| podAnnotations | object | `{}` |  |
| podLabels | object | `{}` |  |
| podSecurityContext | object | `{}` |  |
| replicaCount | int | `3` |  |
| resources.limits.cpu | string | `"8"` |  |
| resources.limits.memory | string | `"16Gi"` |  |
| resources.requests.cpu | string | `"4"` |  |
| resources.requests.memory | string | `"8Gi"` |  |
| secrets.langkitApiSecret | string | `"langkit-api-secret"` | from-literal=LANGKIT_API_KEY=<langkit-api-key> |
| secrets.whylabsApiKey | string | `"whylabs-api-key"` | from-literal=WHYLABS_API_KEY=<whylabs-api-key> |
| securityContext | object | `{}` |  |
| service.port | int | `8000` |  |
| service.type | string | `"ClusterIP"` |  |
| serviceAccount.annotations | object | `{}` |  |
| serviceAccount.automount | bool | `true` |  |
| serviceAccount.create | bool | `false` |  |
| serviceAccount.name | string | `""` |  |
| tolerations[0].effect | string | `"NoSchedule"` |  |
| tolerations[0].key | string | `"kubernetes.azure.com/scalesetpriority"` |  |
| tolerations[0].operator | string | `"Equal"` |  |
| tolerations[0].value | string | `"spot"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.12.0](https://github.com/norwoodj/helm-docs/releases/v1.12.0)
